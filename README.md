### Humhub Composer Installer

This package installs HumHub in version 1.1.* into a web directory which can be configured in the composer.json of your project and is relative to the project-vendor dir(`humhub: web-dir`).
You can also configure a configuration directory (`humhub: config-dir`). In that directory you can put a project index.php, .htaccess and protected/yii which will be symlinked into the humhub web directory.

You can also configure a folder for your own modules directory (`humhub: module-dir`) and  for the themes directory (`humhub: theme-dir`) These will also be symlinked into the humhub web directory and should be relative to the project-vendor-dir.

If there aren't any configuration files (index.php, protected/yii) provided by your project, this package will install default configuration files. These you can find in the `etc/config` directory of this package.

The whole web-directory will regenerated by any composer update or install. The generated symlinks are relative paths, so they can be compressed, for example as tar or zip file. ThatÂ´s important for deployments or any other movement of the project,  

## To install Humhub:
Add the following lines to the composer.json of your project:
```
  "require": {
    "bower-asset/select2-bootstrap-theme": "0.1.0-beta.4",
    "humhub/humhub": "v1.1.2",
    "move-elevator/humhub-composer-installer": "0.1.0"
  },
  "autoload": {
    "psr-4": {
      "humhub\\": "web/protected/humhub",
      "humhub\\modules\\": "web/protected/modules"
    }
  },
  "repositories": [
    {
      "type": "vcs",
      "url":  "https://github.com/humhub/humhub.git"
    }
  ],
  "scripts": {
    "post-update-cmd": [
      "MoveElevator\\Composer\\Installer::initialize"
    ],  
    "post-install-cmd": [
      "MoveElevator\\Composer\\Installer::initialize"
    ]  
  },
  "extra": {
    "humhub": {
      "web-dir": "../web",
      "config-dir": "../etc/config",
      "module-dir": "../modules",
      "theme-dir": "../themes"
    },
    "asset-installer-paths": {
      "npm-asset-library": "htdocs/protected/vendor/npm",
      "bower-asset-library": "htdocs/protected/vendor/bower"
    }
  }
```


## Checks
Run each command in the current package root directory.

### Execute PHPUnit tests

```
./vendor/bin/phpunit.phar -c ./phpunit.xml --debug --verbose
```

### Execute PHPMD checks

```
./vendor/bin/phpmd.phar ./src text ./phpmd.xml
```

### Execute PHPSTAN checks

```
./vendor/bin/phpstan.phar analyse -l 7 src/
```

### TroubleShooting

this package could not handle a vendor-, web-, config-, theme- or module-directory outside the project root-directory. 

### TODO

- test and implement install for windows system

